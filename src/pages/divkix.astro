---
import { siteConfig } from "@/data/site.config";
import SiteLayout from "@/layouts/SiteLayout.astro";
import { baseUrl } from "@/lib/seo";

const profilePageSchema = {
  "@context": "https://schema.org",
  "@type": "ProfilePage",
  "@id": `${baseUrl}/divkix`,
  mainEntity: {
    "@id": `${baseUrl}/#author`,
  },
  name: `${siteConfig.handle} - ${siteConfig.name}`,
  description: `${siteConfig.handle.toLowerCase()} is the online handle of ${siteConfig.name}`,
  url: `${baseUrl}/divkix`,
};

// FAQ Schema for identity disambiguation - helps capture "who is divkix" queries
const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  mainEntity: [
    {
      "@type": "Question",
      name: "Who is divkix?",
      acceptedAnswer: {
        "@type": "Answer",
        text: `Divkix is the online handle and username of ${siteConfig.name}, a ${siteConfig.seo?.jobTitle || "Software Engineer"} based in ${siteConfig.location}. You can find divkix on GitHub, LinkedIn, X (Twitter), and other platforms.`,
      },
    },
    {
      "@type": "Question",
      name: "Is divkix the same person as Divanshu Chauhan?",
      acceptedAnswer: {
        "@type": "Answer",
        text: `Yes, divkix is the online handle of ${siteConfig.name}. They are the same person. ${siteConfig.name} uses "divkix" as a consistent username across GitHub, LinkedIn, X, and other social platforms.`,
      },
    },
  ],
};

// Top 3 projects for quick showcase
const topProjects = siteConfig.projects.slice(0, 3);

// Navigation links
const navLinks = [
  {
    label: "About Me",
    href: "/about",
    description: "Learn more about my background",
  },
  {
    label: "Social Profiles",
    href: "/socials",
    description: "Find me across the web",
  },
  {
    label: "Blog",
    href: "/blog",
    description: "Read my thoughts and tutorials",
  },
];
---

<SiteLayout
  title="divkix | Divanshu Chauhan"
  description="divkix is Divanshu Chauhan - Software Engineer and open source contributor."
>
  <script is:inline type="application/ld+json" set:html={JSON.stringify(profilePageSchema)} />
  <script is:inline type="application/ld+json" set:html={JSON.stringify(faqSchema)} />

  <div class="container mx-auto px-4 py-20">
    <div class="max-w-2xl mx-auto space-y-12">
      <!-- Author Image & Identity -->
      <div class="text-center space-y-6">
        <img
          src={siteConfig.authorImage}
          alt={siteConfig.name}
          class="w-32 h-32 rounded-full mx-auto border-4 border-primary/20 shadow-lg"
        />
        <div class="space-y-2">
          <h1 class="text-5xl font-display font-bold">@divkix</h1>
          <p class="text-2xl text-foreground/70">
            is <span class="text-primary font-semibold">{siteConfig.name}</span>
          </p>
        </div>
        <p class="text-lg text-foreground/60 max-w-md mx-auto">
          {siteConfig.tagline}
        </p>
      </div>

      <!-- Quick Bio -->
      <div class="glass-surface p-6 rounded-lg space-y-4">
        <h2 class="text-xl font-semibold">Quick Bio</h2>
        <p class="text-foreground/70 leading-relaxed">
          {siteConfig.about}
        </p>
        <div class="flex flex-wrap gap-4 text-sm text-foreground/60">
          <span class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/>
              <circle cx="12" cy="10" r="3"/>
            </svg>
            {siteConfig.location}
          </span>
          <span class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect width="20" height="16" x="2" y="4" rx="2"/>
              <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
            </svg>
            {siteConfig.email}
          </span>
        </div>
      </div>

      <!-- Navigation Links -->
      <nav class="space-y-4" aria-label="Site navigation">
        <h2 class="text-xl font-semibold text-center">Explore</h2>
        {navLinks.map((link) => (
          <a
            href={link.href}
            class="glass-surface p-5 rounded-lg flex items-center justify-between gap-4 hover:border-primary/50 transition-colors group block"
          >
            <div>
              <span class="text-lg font-semibold block">{link.label}</span>
              <span class="text-sm text-foreground/60 block">{link.description}</span>
            </div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="text-foreground/40 group-hover:text-primary transition-colors"
            >
              <path d="m9 18 6-6-6-6"/>
            </svg>
          </a>
        ))}
      </nav>

      <!-- Top Projects -->
      <section class="space-y-4">
        <h2 class="text-xl font-semibold text-center">Featured Projects</h2>
        {topProjects.map((project) => {
          const primaryLink = project.links[0];
          return (
            <a
              href={primaryLink.href}
              target="_blank"
              rel="noopener noreferrer"
              class="glass-surface p-5 rounded-lg flex items-center justify-between gap-4 hover:border-primary/50 transition-colors group block"
            >
              <div class="flex-1">
                <span class="text-lg font-semibold block">{project.name}</span>
                <span class="text-sm text-foreground/60 block line-clamp-2">{project.desc}</span>
                <div class="flex flex-wrap gap-2 mt-2">
                  {project.tags.slice(0, 3).map((tag) => (
                    <span class="text-xs px-2 py-1 bg-primary/10 text-primary rounded-full">{tag}</span>
                  ))}
                </div>
              </div>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-foreground/40 group-hover:text-primary transition-colors flex-shrink-0"
              >
                <path d="M7 7h10v10" />
                <path d="M7 17 17 7" />
              </svg>
            </a>
          );
        })}
      </section>

      <!-- Footer Statement -->
      <div class="text-center text-foreground/60 text-sm space-y-2 pt-8 border-t border-border">
        <p>
          <strong class="text-foreground">divkix</strong> is the online handle of <strong class="text-foreground">{siteConfig.name}</strong>
        </p>
        <p class="text-xs">
          {siteConfig.seo?.jobTitle || "Software Engineer"} | {siteConfig.location}
        </p>
      </div>
    </div>
  </div>
</SiteLayout>
