---
import SocialIcons from "@/components/shared/SocialIcons.astro";
import { siteConfig } from "@/data/site.config";

const firstName = siteConfig.name.split(" ")[0];
const lastName = siteConfig.name.split(" ")[1];
---

<section id="hero" class="container mx-auto px-4 min-h-screen flex items-center relative py-20">
  <div class="grid grid-cols-1 lg:grid-cols-[3fr_2fr] gap-12 lg:gap-16 w-full items-center">
    <!-- Left: Main content -->
    <div class="flex flex-col items-start">
      <!-- Section label -->
      <p class="mb-6 font-mono text-sm tracking-wider text-muted-foreground hero-label">
        // 00 â€” intro
      </p>

      <!-- Handle with blinking cursor -->
      <p class="font-mono text-sm text-muted-foreground mb-4 hero-handle">
        @{siteConfig.handle.toLowerCase()}<span class="cursor-blink">_</span>
      </p>

      <!-- Name: massive Instrument Serif -->
      <h1 class="font-display text-7xl md:text-8xl lg:text-9xl font-bold tracking-tight leading-[0.9] text-foreground hero-name">
        {firstName}<br />{lastName}
      </h1>

      <!-- Tagline: offset right for visual tension -->
      <div class="w-full flex justify-end mt-6 hero-tagline">
        <p class="text-muted-foreground text-lg md:text-xl max-w-sm text-right">
          {siteConfig.tagline}
        </p>
      </div>

      <!-- CTAs -->
      <div class="flex flex-wrap gap-4 mt-10 hero-cta">
        <a
          href="#projects"
          class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-primary text-primary-foreground hover:bg-primary/90 h-11 px-6 shadow-hard btn-snap-hover"
        >
          View Projects
        </a>
        <a
          href="/blog/"
          class="inline-flex items-center gap-2 justify-center whitespace-nowrap rounded-md text-base font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 border border-border hover:bg-accent hover:text-accent-foreground h-11 px-6 btn-snap-hover"
        >
          Read Blog
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
            <path d="M5 12h14" />
            <path d="m12 5 7 7-7 7" />
          </svg>
        </a>
      </div>

      <!-- Social icons: horizontal row below CTAs -->
      <div class="mt-8 hero-socials">
        <SocialIcons size="sm" />
      </div>
    </div>

    <!-- Right: Terminal snippet -->
    <div class="hidden lg:block hero-terminal">
      <div class="overflow-hidden rounded-lg">
        <!-- Title bar -->
        <div class="flex items-center bg-[oklch(0.12_0_0)] px-4 py-3">
          <div class="flex gap-2">
            <span class="size-3 rounded-full bg-[#ff5f57]"></span>
            <span class="size-3 rounded-full bg-[#febc2e]"></span>
            <span class="size-3 rounded-full bg-[#28c840]"></span>
          </div>
          <span class="flex-1 text-center font-mono text-xs text-muted-foreground">~/.zshrc</span>
        </div>
        <!-- Content -->
        <div class="relative bg-[oklch(0.08_0_0)] p-6 font-mono text-sm terminal-content" style="color: oklch(0.7 0.2 140); text-shadow: 0 0 2px currentColor; box-shadow: inset 0 0 60px rgba(0,0,0,0.3);">
          <!-- Scanlines -->
          <div class="pointer-events-none absolute inset-0" style="background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.15) 2px, rgba(0,0,0,0.15) 4px); opacity: 0.06;"></div>
          <div class="relative space-y-2">
            <p><span class="text-[oklch(0.7_0.15_55)]">$</span> whoami</p>
            <p>{siteConfig.name.toLowerCase().replace(" ", ".")}</p>
            <p class="mt-4"><span class="text-[oklch(0.7_0.15_55)]">$</span> cat role.txt</p>
            <p>{siteConfig.seo.jobTitle}</p>
            <p class="mt-4"><span class="text-[oklch(0.7_0.15_55)]">$</span> echo $LOCATION</p>
            <p>{siteConfig.location}</p>
            <p class="mt-4"><span class="text-[oklch(0.7_0.15_55)]">$</span> <span class="cursor-blink">_</span></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .cursor-blink {
    animation: cursor-blink 1s step-end infinite;
  }

  /* Label: clip-path reveal from left */
  .hero-label {
    animation: clip-reveal 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
  }

  /* Handle: clip reveal, staggered */
  .hero-handle {
    opacity: 0;
    animation: clip-reveal 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.15s forwards;
  }

  /* Name: scale up from 0.95 */
  .hero-name {
    opacity: 0;
    animation: hero-name-enter 0.7s cubic-bezier(0.4, 0, 0.2, 1) 0.2s forwards;
  }

  /* Tagline: slide in from right */
  .hero-tagline {
    opacity: 0;
    animation: hero-slide-right 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.35s forwards;
  }

  /* CTAs: slide up */
  .hero-cta {
    opacity: 0;
    animation: hero-slide-up 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.45s forwards;
  }

  /* Socials: fade in */
  .hero-socials {
    opacity: 0;
    animation: hero-fade 0.4s ease-out 0.55s forwards;
  }

  /* Terminal: slide in from right + scale */
  .hero-terminal {
    opacity: 0;
    animation: hero-terminal-enter 0.7s cubic-bezier(0.4, 0, 0.2, 1) 0.3s forwards;
  }

  @keyframes clip-reveal {
    from { clip-path: inset(0 100% 0 0); }
    to { clip-path: inset(0); }
  }

  @keyframes hero-name-enter {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes hero-slide-right {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes hero-slide-up {
    from {
      opacity: 0;
      transform: translateY(12px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes hero-fade {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes hero-terminal-enter {
    from {
      opacity: 0;
      transform: translateX(24px) scale(0.97);
    }
    to {
      opacity: 1;
      transform: translateX(0) scale(1);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .hero-label,
    .hero-handle,
    .hero-name,
    .hero-tagline,
    .hero-cta,
    .hero-socials,
    .hero-terminal {
      animation: none;
      opacity: 1;
      transform: none;
      clip-path: none;
    }

    .cursor-blink {
      animation: none;
      opacity: 1;
    }
  }
</style>
